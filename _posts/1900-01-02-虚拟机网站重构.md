---
layout:     post
title:      虚拟机网站重构
subtitle:   备用
date:       1900-01-02
author:     Rainsblue.chan
header-img: ![3](../../../wallpaper/3.jpg)
catalog:   true
tags:
    - 经验
---

## 虚拟机网站重构

### 宝塔面板的使用

具体来说，我现在尝试的方法是在centos7里去下载宝塔面板。[详情点击](https://www.yii666.com/blog/455041.html)

指令为下面一行

`yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh `

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230823162418487.png" alt="image-20230823162418487" style="zoom:50%;" />

宝塔面板centos内外网面板地址。

 外网面板地址: http://39.144.107.0:42128/9c4fad78
 内网面板地址: http://192.168.88.143:42128/9c4fad78
 username: lj3nhjz9
 password: e12b538a

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230823163458892.png" alt="image-20230823163458892" style="zoom:50%;" />

虚拟机请使用F9来查看目录。

### 宝塔Linux ——mysql存放位置

![image-20230823232548820](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230823232548820.png)

[文章链接](https://www.8a.hk/news/content/5656.html)

![image-20230823232710812](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230823232710812.png)

### 加入网站数据方式

删除id0、1和data1，复制其他文件夹与所在文件夹的data1

![image-20230823232931620](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230823232931620.png)

### 自己重新在电脑上搞一个（账密）

![image-20230823233912632](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230823233912632.png)

![image-20230823234002836](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230823234002836.png)

一个小细节，注意常存快照，否则会吃大亏

代理选择美国会非常好

我在做第一份镜像的时候掉网卡了，所以你还得看着虚拟机，就和你烧饭一样

真心逆天，就是我发现centos7这个版本有保护机制，要去该文件参数，掉网还要重启网络服务

https://blog.csdn.net/qq_45839663/article/details/127341289

这个是防保护机制的https://www.ibashu.cn/news/show_544247.html

![image-20230824010957311](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230824010957311.png)

### 账密

![image-20230824010813398](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230824010813398.png)

![image-20230824010827255](C:/Users/14682/AppData/Roaming/Typora/typora-user-images/image-20230824010827255.png)

 外网面板地址: https://114.84.196.106:22686/57226291
 内网面板地址: https://192.168.88.144:22686/57226291
 username: rrrzttqt
 password: 1f0681aa

我赶紧给他下安装包，先浅睡一会儿

### 第二天早上（其实是中午）

### 账密修改

liuhan

123456

### Mysql修改i密码

临时密码`grep 'temporary password' /var/log/mysqld.lo`

## 重现，网站重构

### 放置网站文件

第一步我们建立站点，然后删除下置源文件。

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825151928815.png" alt="image-20230825151928815" style="zoom: 33%;" />

![image-20230825152328824](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825152328824.png)

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825152352165.png" alt="image-20230825152352165" style="zoom: 33%;" />

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825152418169.png" alt="image-20230825152418169" style="zoom:33%;" />

### 进入终端解压

`tar -xvf '解压包名称'`

![image-20230825152918141](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825152918141.png)

![image-20230825153029770](C:/Users/14682/AppData/Roaming/Typora/typora-user-images/image-20230825153029770.png)

[关于tar指令详解](https://blog.csdn.net/weixin_42350212/article/details/127072117)

<img src="C:/Users/14682/AppData/Roaming/Typora/typora-user-images/image-20230825153141278.png" alt="image-20230825153141278" style="zoom:33%;" />

你也可以在常用命令里面编辑一个

### 剪切黏贴

<img src="C:/Users/14682/AppData/Roaming/Typora/typora-user-images/image-20230825153346951.png" alt="image-20230825153346951" style="zoom:50%;" />

![image-20230825153429134](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825153429134.png)

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825153535707.png" alt="image-20230825153535707" style="zoom:50%;" />

### 网站站点修改（伪静态）

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825153717662.png" alt="image-20230825153717662" style="zoom:50%;" />

保存

### 编辑配置文件，连接数据库

位置

`www/wwwroot/网站站点名称/Application/Common/Conf/config.php`

![image-20230825153850925](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825153850925.png)

![image-20230825154408590](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825154408590.png)

我们看见连接数据库的密码

![image-20230825155037119](https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825155037119.png)

改数据库密码，配置完毕

现在无法登录网站

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825155534538.png" alt="image-20230825155534538" style="zoom:25%;" />

### 软件商店配置php-7.2

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825155328744.png" alt="image-20230825155328744" style="zoom:33%;" />

### 打开hosts文件

位置

`C:\Windows\System32\drivers\etc`

<img src="https://cdn.jsdelivr.net/gh/rainsbluechan/blogimage@main/img/image-20230825155658596.png" alt="image-20230825155658596" style="zoom:33%;" />

<img src="C:/Users/14682/AppData/Roaming/Typora/typora-user-images/image-20230825160004351.png" alt="image-20230825160004351" style="zoom:25%;" />

<img src="C:/Users/14682/AppData/Roaming/Typora/typora-user-images/image-20230825160139524.png" alt="image-20230825160139524" style="zoom:33%;" />

用记事本打开，记得完全控制，属性里面改。
